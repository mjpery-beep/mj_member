{% set page = view.page|default({}) %}
{% set partials = view.partials|default({}) %}
{% set assets = view.assets|default({}) %}

<main class="{{ page.class|default('mj-event-page')|esc_attr }}" style="{{ page.style|default('')|esc_attr }}" data-event-id="{{ page.data_event_id|default(0) }}">
    <div class="mj-event-page__wrapper">
        {% include 'event-page/partials/hero.html.twig' with { hero: partials.hero|default({}) } only %}

        <a class="mj-event-page__back" href="{{ '/evenements/'|esc_url }}" aria-label="Retour vers la liste des évènements">
            {% set menu_icon = assets.icons.calendar|default('') %}
            {% if menu_icon %}
                <span class="mj-event-page__back-icon" aria-hidden="true">
                    <img src="{{ menu_icon|esc_url }}" alt="" class="mj-member-account-menu__event-button-image" loading="lazy" decoding="async" />
                </span>
            {% else %}
                <span class="mj-event-page__back-icon mj-event-page__back-icon--fallback" aria-hidden="true">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"/><line x1="9" y1="12" x2="21" y2="12"/></svg>
                </span>
            {% endif %}
            <span class="mj-event-page__back-label">Retour</span>
        </a>

        <div class="mj-event-page__body">
            <div class="mj-event-page__main">
                {% include 'event-page/partials/description.html.twig' with { description: partials.description|default({}) } only %}

                {% include 'event-page/partials/registration.html.twig' with {
                    registration: partials.registration|default({}),
                    sidebar: partials.sidebar|default({})
                } only %}

                {% include 'event-page/partials/location.html.twig' with { location: partials.location|default({}) } only %}

                {% include 'event-page/partials/photos.html.twig' with { photos: partials.photos|default({}) } only %}
            </div>

            <aside class="mj-event-page__sidebar">
                {% include 'event-page/partials/sidebar.html.twig' with { sidebar: partials.sidebar|default({}) } only %}

                {% include 'event-page/partials/animateurs.html.twig' with {
                    animateurs: partials.animateurs|default({}),
                    assets: assets
                } only %}
            </aside>
        </div>
    </div>
</main>
